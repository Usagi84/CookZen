<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CookZen</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #f8f8f8;
    }

    body.rouge {
      background-color: #ffeded;
      color: #a80000;
    }

    body.bleu {
      background-color: #e6f0ff;
      color: #003d99;
    }

    body.violet {
      background-color: #f0e6ff;
      color: #4b0082;
    }

    body.red .footer {
      background-color: #db3131;
    }
    body.orange .footer {
      background-color: #ffb74d;
    }
    body.blue .footer {
      background-color: #64b5f6;
    }
    body.purple .footer {
      background-color: #ba68c8;
    }

    body.red .voir-btn, body.red .etape-btn {
      background-color: #db3131;
    }
    body.orange .voir-btn, body.orange .etape-btn {
      background-color: #ffb74d;
    }
    body.blue .voir-btn, body.blue .etape-btn {
      background-color: #64b5f6;
    }
    body.purple .voir-btn, body.purple .etape-btn {
      background-color: #ba68c8;
    }
    
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: #fff;
      border-top: 1px solid #ccc;
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 20;
    }

    .nav-btn {
      text-decoration: none;
      background: none;
      border: none;
      font-size: 34px;
      cursor: pointer;
      color: #8f8989;
    }

    .nav-btn:focus {
      outline: none;
    }
    
    .footer {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 120px;
      background: #db3131;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 32px;
      z-index: 10;
    }

    .barre {
      position: fixed;
      top: 120px;
      left: 0;
      width: 100%;
      height: 8px;
      background: black;
      z-index: 9;
    }

    .contenu {
      margin-top: 140px;
      padding: 20px;
      font-size: 18px;
      transition: filter 0.3s ease;
    }

    /* Syst√®me Premium */
    .premium-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 15;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .premium-box {
      background: white;
      padding: 30px;
      border-radius: 20px;
      text-align: center;
      max-width: 350px;
      margin: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .premium-title {
      font-size: 24px;
      font-weight: bold;
      color: #db3131;
      margin-bottom: 15px;
    }

    .premium-text {
      font-size: 16px;
      color: #666;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .premium-price {
      font-size: 32px;
      font-weight: bold;
      color: #db3131;
      margin: 20px 0;
    }

    .payment-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 20px;
    }

    .payment-btn {
      padding: 15px 25px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .paypal-btn {
      background: #0070ba;
      color: white;
    }

    .paypal-btn:hover {
      background: #005ea6;
      transform: translateY(-2px);
    }

    .card-btn {
      background: #28a745;
      color: white;
    }

    .card-btn:hover {
      background: #218838;
      transform: translateY(-2px);
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      font-size: 24px;
      color: #999;
      cursor: pointer;
    }

    .close-btn:hover {
      color: #333;
    }

    /* Flou du contenu quand premium est affich√© */
    .content-blurred .contenu {
      filter: blur(5px);
      pointer-events: none;
    }

    .content-blurred .footer {
      filter: blur(5px);
      pointer-events: none;
    }

    .content-blurred .barre {
      filter: blur(5px);
    }

    @media (max-width: 480px) {
      .contenu {
        margin-top: 120px;
      }
      .footer { 
        font-size: 24px; 
        height: 110px; 
      }
      .barre { 
        top: 110px; 
      }
      .premium-box {
        margin: 10px;
        padding: 20px;
      }
      .premium-title {
        font-size: 20px;
      }
      .premium-price {
        font-size: 28px;
      }
    }

    .recette-item {
      margin-bottom: 30px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 15px;
      position: relative;
    }

    .recette-title {
      font-size: 20px;
      font-weight: bold;
      padding-left: 40px;
    }

    .voir-btn, .etape-btn {
      margin-top: 6px;
      padding: 6px 12px;
      font-size: 14px;
      background: #db3131;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: inline-block;
      transition: background-color 0.3s ease;
    }

    .search-input {
      display: block;
      margin: 0 auto 20px auto;
      padding: 10px;
      width: 90%;
      max-width: 400px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }

    .recette-content {
      display: none;
      margin-top: 10px;
      font-size: 16px;
    }

    .recette-content.active {
      display: block;
    }

    .heart {
      font-size: 26px;
      color: #db3131;
      cursor: pointer;
      position: absolute;
      left: 0;
      top: 0;
      transition: 0.3s;
    }

    .heart.fav {
      color: red;
    }

    .cookzen-title {
      position: absolute;
      bottom: 10px;
      left: 20px;
      font-size: 48px;
      font-weight: bold;
      color: white;
    }

    #lang-btn {
      position: absolute;
      top: 10px;
      right: 20px;
      background: white;
      color: #db3131;
      border: none;
      border-radius: 5px;
      font-size: 24px;
      padding: 6px 10px;
      cursor: pointer;
      z-index: 11;
      transition: background 0.2s;
    }

    #lang-btn:hover {
      background: #f1f1f1;
    }

    /* Styles pour le succ√®s */
    .success-message {
      background: #d4edda;
      color: #155724;
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
      border: 1px solid #c3e6cb;
      text-align: center;
    }
  </style>
</head>
<body>

<div class="footer">
  <div class="cookzen-title">CookZen</div>
</div>

<div class="barre"></div>

<div class="bottom-nav">
  <a class="nav-btn" href="index.html">üè†</a>
  <a class="nav-btn" href="premium1.html">üîí</a>
  <a class="nav-btn" href="favoris.html">‚ù§Ô∏è</a>
  <a class="nav-btn" href="parametres.html">‚öôÔ∏è</a>
</div>

<!-- Overlay Premium -->
<div id="premiumOverlay" class="premium-overlay">
  <div class="premium-box">
    <button class="close-btn" onclick="closePremium()">&times;</button>
    <div class="premium-title">üîì D√©bloquez toutes les recettes</div>
    <div class="premium-text">
      Acc√©dez √† plus de 20 recettes sans gluten exclusives et profitez de toutes les fonctionnalit√©s premium de CookZen !
    </div>
    <div class="premium-price">0,99‚Ç¨</div>
    <div class="payment-buttons">
      <button class="payment-btn paypal-btn" onclick="payWithPaypal()">
        üí≥ Payer avec PayPal
      </button>
      <button class="payment-btn card-btn" onclick="payWithCard()">
        üí≥ Payer par Carte
      </button>
    </div>
  </div>
</div>

<div class="contenu">
  <input type="text" id="searchInput" class="search-input" placeholder="Rechercher une recette..." onkeyup="filterRecipes()">
  
  <div id="recipeList">
    <div class="recette-item" data-id="pain">
      <span class="heart">ü§ç</span>
      <div class="recette-title">üçû Pain sans gluten
        <button class="voir-btn" onclick="afficheRecette('pain')">Voir</button>
      </div>
      <div id="pain" class="recette-content">
        <ul>
          <li>250 g de farine de riz</li>
          <li>50 g de farine de sarrasin</li>
          <li>50 g de f√©cule de ma√Øs (ou pomme de terre)</li>
          <li>1 c. √† caf√© de sel</li>
          <li>1 c. √† soupe de psyllium blond (indispensable)</li>
          <li>1 sachet de levure de boulanger s√®che (ou 15 g de levure fra√Æche)</li>
          <li>1 c. √† caf√© de sucre</li>
          <li>300 ml d'eau ti√®de</li>
          <li>1 c. √† soupe d'huile d'olive</li>
        </ul>
        <a class="etape-btn" href="pain.html">Voir les √©tapes</a>
      </div>
    </div>

    <div class="recette-item" data-id="pizza">
      <span class="heart">ü§ç</span>
      <div class="recette-title">üçï P√¢te √† pizza sans gluten
        <button class="voir-btn" onclick="afficheRecette('pizza')">Voir</button>
      </div>
      <div id="pizza" class="recette-content">
        <ul>
          <li>150 g de farine de riz</li>
          <li>50 g de farine de sarrasin</li>
          <li>50 g de f√©cule de ma√Øs</li>
          <li>1 c. √† caf√© de sel</li>
          <li>1 c. √† soupe de psyllium blond</li>
          <li>1 sachet de levure de boulanger s√®che</li>
          <li>1 c. √† caf√© de sucre</li>
          <li>180 ml d'eau ti√®de</li>
          <li>1 c. √† soupe d'huile d'olive</li>
        </ul>
        <a class="etape-btn" href="pizza.html">Voir les √©tapes</a>
      </div>
    </div>

    <div class="recette-item" data-id="muffins">
      <span class="heart">ü§ç</span>
      <div class="recette-title">üßÅ Muffins sans gluten
        <button class="voir-btn" onclick="afficheRecette('muffins')">Voir</button>
      </div>
      <div id="muffins" class="recette-content">
        <ul>
          <li>200 g farine de riz</li>
          <li>50 g f√©cule de ma√Øs</li>
          <li>1 sachet levure chimique sans gluten</li>
          <li>80 g sucre</li>
          <li>1 pinc√©e sel</li>
          <li>2 ≈ìufs</li>
          <li>100 ml lait</li>
          <li>80 ml huile neutre</li>
        </ul>
        <a class="etape-btn" href="muffins.html">Voir les √©tapes</a>
      </div>
    </div>

    <!-- Toutes les autres recettes... -->
    <div class="recette-item" data-id="burger">
      <span class="heart">ü§ç</span>
      <div class="recette-title">üçî Pain a burger sans gluten
        <button class="voir-btn" onclick="afficheRecette('burger')">Voir</button>
      </div>
      <div id="burger" class="recette-content">
        <ul>
          <li>300 g farine de riz</li>
          <li>50 g farine de pois chiche</li>
          <li>30 g f√©cule de ma√Øs</li>
          <li>1/2 c.√†.c gomme xanthane</li>
          <li>1 c.√†.c sel</li>
          <li>1 sachet levure boulang√®re s√®che</li>
          <li>1 c.√†.c sucre</li>
          <li>1 ≈ìuf</li>
          <li>50 ml huile d'olive</li>
          <li>100 ml eau ti√®de</li>
        </ul>
        <a class="etape-btn" href="burger.html">Voir les √©tapes</a>
      </div>
    </div>

    <!-- Ajout de toutes les autres recettes existantes -->
    <div class="recette-item" data-id="croissant">
      <span class="heart">ü§ç</span>
      <div class="recette-title">ü•ê Croissant sans gluten
        <button class="voir-btn" onclick="afficheRecette('croissant')">Voir</button>
      </div>
      <div id="croissant" class="recette-content">
        <ul>
          <li>250 g farine de riz</li>
          <li>50 g f√©cule de ma√Øs</li>
          <li>1/2 c.√†.c gomme xanthane</li>
          <li>1 c.√†.c sel</li>
          <li>1 sachet levure boulang√®re s√®che</li>
          <li>1 c.√†.c sucre</li>
          <li>150 ml lait ti√®de</li>
          <li>50 g beurre fondu</li>
          <li>50 ml eau ti√®de</li>
        </ul>
        <a class="etape-btn" href="croissant.html">Voir les √©tapes</a>
      </div>
    </div>

    <div class="recette-item" data-id="cookies">
      <span class="heart">ü§ç</span>
      <div class="recette-title">üç™ Cookies sans gluten
        <button class="voir-btn" onclick="afficheRecette('cookies')">Voir</button>
      </div>
      <div id="cookies" class="recette-content">
        <ul>
          <li>120 g de farine sans gluten</li>
          <li>100 g de sucre roux</li>
          <li>1 ≈ìuf</li>
          <li>80 g de beurre mou</li>
          <li>1/2 c. √† caf√© de levure chimique sans gluten</li>
          <li>1/2 c. √† caf√© d'extrait de vanille</li>
          <li>100 g de p√©pites de chocolat noir</li>
        </ul>
        <a class="etape-btn" href="cookies.html">Voir les √©tapes</a>
      </div>
    </div>
  </div>
</div>

<script>
// Variables globales
let isPremium = false;

// V√©rification du statut premium au chargement
function checkPremiumStatus() {
  const premiumStatus = localStorage.getItem('cookzenPremium');
  if (premiumStatus === 'true') {
    isPremium = true;
    hidePremiumOverlay();
  } else {
    showPremiumOverlay();
  }
}

// Afficher l'overlay premium
function showPremiumOverlay() {
  document.getElementById('premiumOverlay').style.display = 'flex';
  document.body.classList.add('content-blurred');
}

// Masquer l'overlay premium
function hidePremiumOverlay() {
  document.getElementById('premiumOverlay').style.display = 'none';
  document.body.classList.remove('content-blurred');
}

// Fermer temporairement (pour test)
function closePremium() {
  hidePremiumOverlay();
}

// Simulation de paiement PayPal
function payWithPaypal() {
  // Simulation d'une redirection PayPal
  if (confirm('Redirection vers PayPal pour payer 0,99‚Ç¨. Continuer ?')) {
    simulatePaymentSuccess();
  }
}

// Simulation de paiement par carte
function payWithCard() {
  // Simulation d'un paiement par carte
  const cardNumber = prompt('Entrez votre num√©ro de carte (simulation):');
  if (cardNumber && cardNumber.length >= 4) {
    simulatePaymentSuccess();
  } else if (cardNumber !== null) {
    alert('Num√©ro de carte invalide');
  }
}

// Simulation de succ√®s de paiement
function simulatePaymentSuccess() {
  // Sauvegarder le statut premium
  localStorage.setItem('cookzenPremium', 'true');
  isPremium = true;
  
  // Afficher message de succ√®s
  const premiumBox = document.querySelector('.premium-box');
  premiumBox.innerHTML = `
    <div class="success-message">
      <h3>üéâ Paiement r√©ussi !</h3>
      <p>Vous avez maintenant acc√®s √† toutes les recettes premium de CookZen !</p>
      <button class="payment-btn card-btn" onclick="hidePremiumOverlay()" style="margin-top: 15px;">
        Commencer √† cuisiner !
      </button>
    </div>
  `;
  
  // Masquer automatiquement apr√®s 3 secondes
  setTimeout(() => {
    hidePremiumOverlay();
  }, 3000);
}

// Fonctions existantes
function getFavoris() {
  const favoris = localStorage.getItem('favoris');
  return favoris ? JSON.parse(favoris) : [];
}

function saveFavoris(favoris) {
  localStorage.setItem('favoris', JSON.stringify(favoris));
}

function updateHearts() {
  const favoris = getFavoris();
  document.querySelectorAll('.recette-item').forEach(item => {
    const id = item.dataset.id;
    const heart = item.querySelector('.heart');
    if (favoris.includes(id)) {
      heart.textContent = '‚ù§Ô∏è';
      heart.classList.add('fav');
    } else {
      heart.textContent = 'ü§ç';
      heart.classList.remove('fav');
    }
  });
}

function setupHearts() {
  document.querySelectorAll('.heart').forEach(heart => {
    heart.addEventListener('click', () => {
      if (!isPremium) {
        showPremiumOverlay();
        return;
      }
      
      const item = heart.closest('.recette-item');
      const id = item.dataset.id;
      let favoris = getFavoris();

      if (favoris.includes(id)) {
        favoris = favoris.filter(favId => favId !== id);
      } else {
        favoris.push(id);
      }

      saveFavoris(favoris);
      updateHearts();
    });
  });
}

function filterRecipes() {
  if (!isPremium) {
    showPremiumOverlay();
    return;
  }
  
  const search = document.getElementById('searchInput').value.toLowerCase();
  document.querySelectorAll('.recette-item').forEach(item => {
    const title = item.querySelector('.recette-title').textContent.toLowerCase();
    if (title.includes(search)) {
      item.style.display = '';
    } else {
      item.style.display = 'none';
    }
  });
}

function afficheRecette(id) {
  if (!isPremium) {
    showPremiumOverlay();
    return;
  }
  
  const recette = document.getElementById(id);
  if (!recette) return;

  if (recette.style.display === 'block') {
    recette.style.display = 'none';
  } else {
    recette.style.display = 'block';
  }
}

// Initialisation au chargement de la page
document.addEventListener('DOMContentLoaded', () => {
  checkPremiumStatus();
  updateHearts();
  setupHearts();

  // D√©sactiver les interactions avec le contenu si pas premium
  document.getElementById('searchInput').addEventListener('focus', () => {
    if (!isPremium) {
      showPremiumOverlay();
      document.getElementById('searchInput').blur();
    }
  });
  
  // Appliquer le th√®me sauvegard√©
  const savedTheme = localStorage.getItem('cookzenTheme');
  if (savedTheme) {
    document.body.className = document.body.className.replace(/\b(rouge|bleu|violet|red|orange|blue|purple)\b/g, '');
    document.body.classList.add(savedTheme);
  }
});

// Fonction pour reset le premium (pour les tests)
function resetPremium() {
  localStorage.removeItem('cookzenPremium');
  isPremium = false;
  showPremiumOverlay();
}

// Ajouter cette fonction dans la console pour tester : resetPremium()
</script>

</body>
</html>
